{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport * as io from \"socket.io-client\";\nimport { SOCKET_BASE_URL } from \"../constants/apiConstants\";\nexport const useSocket = room => {\n  _s();\n\n  const [socket, setSocket] = useState();\n  const [socketResponse, setSocketResponse] = useState({\n    room: \"\",\n    content: \"\",\n    username: \"\",\n    messageType: \"\",\n    createdDateTime: \"\"\n  });\n  const [isConnected, setConnected] = useState(false);\n  const sendData = useCallback(payload => {\n    socket.emit(\"send_message\", {\n      type: \"CLIENT\",\n      message: \"hello\",\n      room: \"a\",\n      from: \"thai\",\n      to: \"server\"\n    });\n  }, [socket, room]);\n  useEffect(() => {\n    const s = io(SOCKET_BASE_URL, {\n      reconnection: false,\n      query: `&room=${room}`\n    });\n    setSocket(s);\n    s.on(\"connect\", () => setConnected(true));\n    console.log(isConnected);\n    s.on(\"read_message\", res => {\n      console.log(res);\n    });\n    console.log(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []); // return { socketResponse, isConnected, sendData };\n};\n\n_s(useSocket, \"Xg7iAw8ssifA3hKRXDsMkPvYKqs=\");","map":{"version":3,"names":["useCallback","useEffect","useState","io","SOCKET_BASE_URL","useSocket","room","socket","setSocket","socketResponse","setSocketResponse","content","username","messageType","createdDateTime","isConnected","setConnected","sendData","payload","emit","type","message","from","to","s","reconnection","query","on","console","log","res","disconnect"],"sources":["/Users/truonghuythai/Documents/chat/socketio-simple-chat/frontend/src/customHooks/useSocket.js"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport * as io from \"socket.io-client\";\nimport { SOCKET_BASE_URL } from \"../constants/apiConstants\";\n\nexport const useSocket = (room) => {\n  const [socket, setSocket] = useState();\n  const [socketResponse, setSocketResponse] = useState({\n    room: \"\",\n    content: \"\",\n    username: \"\",\n    messageType: \"\",\n    createdDateTime: \"\",\n  });\n  const [isConnected, setConnected] = useState(false);\n  const sendData = useCallback(\n    (payload) => {\n      socket.emit(\"send_message\", {\n        type : \"CLIENT\",\n        message : \"hello\",\n        room : \"a\",\n        from : \"thai\",\n        to : \"server\"\n      });\n    },\n    [socket, room]\n  );\n  useEffect(() => {\n    const s = io(SOCKET_BASE_URL, {\n      reconnection: false,\n      query: `&room=${room}`,\n    });\n    setSocket(s);\n    s.on(\"connect\", () => setConnected(true));\n    console.log(isConnected);\n    s.on(\"read_message\", (res) => {\n      console.log(res);\n    });\n    console.log(s)\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n\n  // return { socketResponse, isConnected, sendData };\n};\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,OAAO,KAAKC,EAAZ,MAAoB,kBAApB;AACA,SAASC,eAAT,QAAgC,2BAAhC;AAEA,OAAO,MAAMC,SAAS,GAAIC,IAAD,IAAU;EAAA;;EACjC,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBN,QAAQ,EAApC;EACA,MAAM,CAACO,cAAD,EAAiBC,iBAAjB,IAAsCR,QAAQ,CAAC;IACnDI,IAAI,EAAE,EAD6C;IAEnDK,OAAO,EAAE,EAF0C;IAGnDC,QAAQ,EAAE,EAHyC;IAInDC,WAAW,EAAE,EAJsC;IAKnDC,eAAe,EAAE;EALkC,CAAD,CAApD;EAOA,MAAM,CAACC,WAAD,EAAcC,YAAd,IAA8Bd,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAMe,QAAQ,GAAGjB,WAAW,CACzBkB,OAAD,IAAa;IACXX,MAAM,CAACY,IAAP,CAAY,cAAZ,EAA4B;MAC1BC,IAAI,EAAG,QADmB;MAE1BC,OAAO,EAAG,OAFgB;MAG1Bf,IAAI,EAAG,GAHmB;MAI1BgB,IAAI,EAAG,MAJmB;MAK1BC,EAAE,EAAG;IALqB,CAA5B;EAOD,CATyB,EAU1B,CAAChB,MAAD,EAASD,IAAT,CAV0B,CAA5B;EAYAL,SAAS,CAAC,MAAM;IACd,MAAMuB,CAAC,GAAGrB,EAAE,CAACC,eAAD,EAAkB;MAC5BqB,YAAY,EAAE,KADc;MAE5BC,KAAK,EAAG,SAAQpB,IAAK;IAFO,CAAlB,CAAZ;IAIAE,SAAS,CAACgB,CAAD,CAAT;IACAA,CAAC,CAACG,EAAF,CAAK,SAAL,EAAgB,MAAMX,YAAY,CAAC,IAAD,CAAlC;IACAY,OAAO,CAACC,GAAR,CAAYd,WAAZ;IACAS,CAAC,CAACG,EAAF,CAAK,cAAL,EAAsBG,GAAD,IAAS;MAC5BF,OAAO,CAACC,GAAR,CAAYC,GAAZ;IACD,CAFD;IAGAF,OAAO,CAACC,GAAR,CAAYL,CAAZ;IACA,OAAO,MAAM;MACXA,CAAC,CAACO,UAAF;IACD,CAFD;EAGD,CAfQ,EAeN,EAfM,CAAT,CAtBiC,CAuCjC;AACD,CAxCM;;GAAM1B,S"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport * as io from \"socket.io-client\";\nimport { SOCKET_BASE_URL } from \"../constants/apiConstants\";\nexport const useSocket = room => {\n  _s();\n\n  const [socket, setSocket] = useState();\n  const [isConnected, setConnected] = useState(false);\n  const [socketResponse, setSocketResponse] = useState([]);\n  const sendData = useCallback(payload => {\n    socket.emit(\"send_message\", {\n      type: \"CLIENT\",\n      message: \"hello\",\n      room: \"a\",\n      from: \"thai\",\n      to: \"server\"\n    });\n  }, [socket, room]);\n  useEffect(() => {\n    const s = io(SOCKET_BASE_URL, {\n      reconnection: false,\n      query: `&room=${room}`\n    });\n    setSocket(s);\n    s.on(\"connect\", () => setConnected(true));\n    console.log(isConnected);\n    s.on(\"read_message\", res => {\n      console.log(res);\n    });\n    console.log(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n  return {\n    socketResponse,\n    isConnected,\n    sendData\n  };\n};\n\n_s(useSocket, \"h1mJYtVqhXV9j5qEnUE6ee/gGnA=\");","map":{"version":3,"names":["useCallback","useEffect","useState","io","SOCKET_BASE_URL","useSocket","room","socket","setSocket","isConnected","setConnected","socketResponse","setSocketResponse","sendData","payload","emit","type","message","from","to","s","reconnection","query","on","console","log","res","disconnect"],"sources":["/Users/truonghuythai/Documents/chat/socketio-simple-chat/frontend/src/customHooks/useSocket.js"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport * as io from \"socket.io-client\";\nimport { SOCKET_BASE_URL } from \"../constants/apiConstants\";\n\nexport const useSocket = (room) => {\n  const [socket, setSocket] = useState();\n\n  const [isConnected, setConnected] = useState(false);\n  const [socketResponse, setSocketResponse] = useState([]);\n  const sendData = useCallback(\n    (payload) => {\n      socket.emit(\"send_message\", {\n        type : \"CLIENT\",\n        message : \"hello\",\n        room : \"a\",\n        from : \"thai\",\n        to : \"server\"\n      });\n    },\n    [socket, room]\n  );\n  useEffect(() => {\n    const s = io(SOCKET_BASE_URL, {\n      reconnection: false,\n      query: `&room=${room}`,\n    });\n    setSocket(s);\n    s.on(\"connect\", () => setConnected(true));\n    console.log(isConnected);\n    s.on(\"read_message\", (res) => {\n      console.log(res);\n    });\n    console.log(s)\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n\n  return { socketResponse, isConnected, sendData };\n};\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,OAAO,KAAKC,EAAZ,MAAoB,kBAApB;AACA,SAASC,eAAT,QAAgC,2BAAhC;AAEA,OAAO,MAAMC,SAAS,GAAIC,IAAD,IAAU;EAAA;;EACjC,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBN,QAAQ,EAApC;EAEA,MAAM,CAACO,WAAD,EAAcC,YAAd,IAA8BR,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAM,CAACS,cAAD,EAAiBC,iBAAjB,IAAsCV,QAAQ,CAAC,EAAD,CAApD;EACA,MAAMW,QAAQ,GAAGb,WAAW,CACzBc,OAAD,IAAa;IACXP,MAAM,CAACQ,IAAP,CAAY,cAAZ,EAA4B;MAC1BC,IAAI,EAAG,QADmB;MAE1BC,OAAO,EAAG,OAFgB;MAG1BX,IAAI,EAAG,GAHmB;MAI1BY,IAAI,EAAG,MAJmB;MAK1BC,EAAE,EAAG;IALqB,CAA5B;EAOD,CATyB,EAU1B,CAACZ,MAAD,EAASD,IAAT,CAV0B,CAA5B;EAYAL,SAAS,CAAC,MAAM;IACd,MAAMmB,CAAC,GAAGjB,EAAE,CAACC,eAAD,EAAkB;MAC5BiB,YAAY,EAAE,KADc;MAE5BC,KAAK,EAAG,SAAQhB,IAAK;IAFO,CAAlB,CAAZ;IAIAE,SAAS,CAACY,CAAD,CAAT;IACAA,CAAC,CAACG,EAAF,CAAK,SAAL,EAAgB,MAAMb,YAAY,CAAC,IAAD,CAAlC;IACAc,OAAO,CAACC,GAAR,CAAYhB,WAAZ;IACAW,CAAC,CAACG,EAAF,CAAK,cAAL,EAAsBG,GAAD,IAAS;MAC5BF,OAAO,CAACC,GAAR,CAAYC,GAAZ;IACD,CAFD;IAGAF,OAAO,CAACC,GAAR,CAAYL,CAAZ;IACA,OAAO,MAAM;MACXA,CAAC,CAACO,UAAF;IACD,CAFD;EAGD,CAfQ,EAeN,EAfM,CAAT;EAiBA,OAAO;IAAEhB,cAAF;IAAkBF,WAAlB;IAA+BI;EAA/B,CAAP;AACD,CAnCM;;GAAMR,S"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport * as io from \"socket.io-client\";\nimport { SOCKET_BASE_URL } from \"../constants/apiConstants\";\nexport const useSocket = (room, username) => {\n  _s();\n\n  const [socket, setSocket] = useState();\n  const [socketResponse, setSocketResponse] = useState({\n    room: \"\",\n    content: \"\",\n    username: \"\",\n    messageType: \"\",\n    createdDateTime: \"\"\n  });\n  const [isConnected, setConnected] = useState(false);\n  const sendData = useCallback(payload => {\n    socket.emit(\"send_message\", {\n      room: room,\n      content: payload.content,\n      username: username,\n      messageType: \"CLIENT\"\n    });\n  }, [socket, room]);\n  useEffect(() => {\n    const s = io(SOCKET_BASE_URL, {\n      reconnection: false,\n      query: `username=${username}&room=${room}` //\"room=\" + room+\",username=\"+username,\n\n    });\n    setSocket(s);\n    s.on(\"connect\", () => setConnected(true));\n    s.on(\"read_message\", res => {\n      console.log(res);\n      setSocketResponse({\n        room: res.room,\n        content: res.content,\n        username: res.username,\n        messageType: res.messageType,\n        createdDateTime: res.createdDateTime\n      });\n    });\n    return () => {\n      s.disconnect();\n    };\n  }, [room]);\n  return {\n    socketResponse,\n    isConnected,\n    sendData\n  };\n};\n\n_s(useSocket, \"Xg7iAw8ssifA3hKRXDsMkPvYKqs=\");","map":{"version":3,"names":["useCallback","useEffect","useState","io","SOCKET_BASE_URL","useSocket","room","username","socket","setSocket","socketResponse","setSocketResponse","content","messageType","createdDateTime","isConnected","setConnected","sendData","payload","emit","s","reconnection","query","on","res","console","log","disconnect"],"sources":["/Users/truonghuythai/Documents/chat/socketio-simple-chat/frontend/src/customHooks/useSocket.js"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport * as io from \"socket.io-client\";\nimport { SOCKET_BASE_URL } from \"../constants/apiConstants\";\n\nexport const useSocket = (room, username) => {\n  const [socket, setSocket] = useState();\n  const [socketResponse, setSocketResponse] = useState({\n    room: \"\",\n    content: \"\",\n    username: \"\",\n    messageType: \"\",\n    createdDateTime: \"\",\n  });\n  const [isConnected, setConnected] = useState(false);\n  const sendData = useCallback(\n    (payload) => {\n      socket.emit(\"send_message\", {\n        room: room,\n        content: payload.content,\n        username: username,\n        messageType: \"CLIENT\",\n      });\n    },\n    [socket, room]\n  );\n  useEffect(() => {\n    const s = io(SOCKET_BASE_URL, {\n      reconnection: false,\n      query: `username=${username}&room=${room}`, //\"room=\" + room+\",username=\"+username,\n    });\n    setSocket(s);\n    s.on(\"connect\", () => setConnected(true));\n    s.on(\"read_message\", (res) => {\n      console.log(res);\n      setSocketResponse({\n        room: res.room,\n        content: res.content,\n        username: res.username,\n        messageType: res.messageType,\n        createdDateTime: res.createdDateTime,\n      });\n    });\n    return () => {\n      s.disconnect();\n    };\n  }, [room]);\n\n  return { socketResponse, isConnected, sendData };\n};\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,OAAO,KAAKC,EAAZ,MAAoB,kBAApB;AACA,SAASC,eAAT,QAAgC,2BAAhC;AAEA,OAAO,MAAMC,SAAS,GAAG,CAACC,IAAD,EAAOC,QAAP,KAAoB;EAAA;;EAC3C,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,EAApC;EACA,MAAM,CAACQ,cAAD,EAAiBC,iBAAjB,IAAsCT,QAAQ,CAAC;IACnDI,IAAI,EAAE,EAD6C;IAEnDM,OAAO,EAAE,EAF0C;IAGnDL,QAAQ,EAAE,EAHyC;IAInDM,WAAW,EAAE,EAJsC;IAKnDC,eAAe,EAAE;EALkC,CAAD,CAApD;EAOA,MAAM,CAACC,WAAD,EAAcC,YAAd,IAA8Bd,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAMe,QAAQ,GAAGjB,WAAW,CACzBkB,OAAD,IAAa;IACXV,MAAM,CAACW,IAAP,CAAY,cAAZ,EAA4B;MAC1Bb,IAAI,EAAEA,IADoB;MAE1BM,OAAO,EAAEM,OAAO,CAACN,OAFS;MAG1BL,QAAQ,EAAEA,QAHgB;MAI1BM,WAAW,EAAE;IAJa,CAA5B;EAMD,CARyB,EAS1B,CAACL,MAAD,EAASF,IAAT,CAT0B,CAA5B;EAWAL,SAAS,CAAC,MAAM;IACd,MAAMmB,CAAC,GAAGjB,EAAE,CAACC,eAAD,EAAkB;MAC5BiB,YAAY,EAAE,KADc;MAE5BC,KAAK,EAAG,YAAWf,QAAS,SAAQD,IAAK,EAFb,CAEgB;;IAFhB,CAAlB,CAAZ;IAIAG,SAAS,CAACW,CAAD,CAAT;IACAA,CAAC,CAACG,EAAF,CAAK,SAAL,EAAgB,MAAMP,YAAY,CAAC,IAAD,CAAlC;IACAI,CAAC,CAACG,EAAF,CAAK,cAAL,EAAsBC,GAAD,IAAS;MAC5BC,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACAb,iBAAiB,CAAC;QAChBL,IAAI,EAAEkB,GAAG,CAAClB,IADM;QAEhBM,OAAO,EAAEY,GAAG,CAACZ,OAFG;QAGhBL,QAAQ,EAAEiB,GAAG,CAACjB,QAHE;QAIhBM,WAAW,EAAEW,GAAG,CAACX,WAJD;QAKhBC,eAAe,EAAEU,GAAG,CAACV;MALL,CAAD,CAAjB;IAOD,CATD;IAUA,OAAO,MAAM;MACXM,CAAC,CAACO,UAAF;IACD,CAFD;EAGD,CApBQ,EAoBN,CAACrB,IAAD,CApBM,CAAT;EAsBA,OAAO;IAAEI,cAAF;IAAkBK,WAAlB;IAA+BE;EAA/B,CAAP;AACD,CA5CM;;GAAMZ,S"},"metadata":{},"sourceType":"module"}